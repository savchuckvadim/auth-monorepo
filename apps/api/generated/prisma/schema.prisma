generator client {
  provider      = "prisma-client-js"
  output        = "../generated/prisma"
  binaryTargets = ["native", "debian-openssl-1.1.x", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id             String     @id @default(uuid())
  name           String     @db.VarChar(255)
  email          String     @unique(map: "users_email_unique") @db.VarChar(255)
  isAcivated     Boolean    @default(false)
  activationLink String     @unique(map: "users_activation_link_unique") @db.VarChar(255)
  role           user_roles
  password       String
  createdAt      DateTime?  @default(now())
  updatedAt      DateTime?  @default(now())
  tokens         Token[]

  @@unique([email])
  @@map("users")
}

model Token {
  id           String @id @default(uuid())
  userId       String @map("user_id") @db.VarChar(255)
  refreshToken String @map("refresh_token") @db.VarChar(255)

  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("tokens")
}

enum user_roles {
  owner
  admin
  user
}
